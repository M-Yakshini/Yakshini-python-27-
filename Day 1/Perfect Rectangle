class Solution:
    def isRectangleCover(self, r):
        a=0
        x1=y1=10**9
        x2=y2=-10**9
        s=set()
        for x,y,X,Y in r:
            a+=(X-x)*(Y-y)
            x1=min(x1,x); y1=min(y1,y)
            x2=max(x2,X); y2=max(y2,Y)
            for p in [(x,y),(x,Y),(X,y),(X,Y)]:
                if p in s: s.remove(p)
                else: s.add(p)
        return a==(x2-x1)*(y2-y1) and len(s)==4
