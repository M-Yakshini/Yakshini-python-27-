class Solution:
    def decodeString(self, s):
        st=[]; cur=""; k=0
        for c in s:
            if c.isdigit():
                k=k*10+int(c)
            elif c=='[':
                st.append((cur,k))
                cur=""; k=0
            elif c==']':
                p,n=st.pop()
                cur=p+cur*n
            else:
                cur+=c
        return cur
